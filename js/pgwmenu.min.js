/**
 * PgwMenu - Version 1.0
 *
 * Copyright 2014, Jonathan M. Piat
 * http://pgwjs.com - http://pagawa.com
 * 
 * Released under the GNU GPLv3 license - http://opensource.org/licenses/gpl-3.0
 */
(function(a){a.fn.pgwMenu=function(c){var d={dropDownLabel:'<span class="icon"></span>',mainClassName:"pgwMenu"};if(this.length==0){return this}else{if(this.length>1){this.each(function(){a(this).pgwMenu(c)});return this}}var b=this;b.plugin=this;b.config={};var f=function(){b.config=a.extend({},d,c);e();b.checkMenu();a(window).resize(function(){b.checkMenu()});b.plugin.find(".pmDropDown").click(function(g){b.enableDropDown();g.stopPropagation()});a(document).click(function(){b.disableDropDown()})};var e=function(){var h=b.config.mainClassName;var g=b.plugin.attr("class");if(g&&g.indexOf("light")>-1){h+=" light"}b.plugin.removeClass();b.plugin.wrap('<div class="'+h+'"></div>');b.plugin=b.plugin.parent();b.plugin.prepend('<div class="pmDropDown"><a href="javascript:void(0)">'+b.config.dropDownLabel+"</a></div>")};b.checkMenu=function(){var i=b.plugin.width();function g(){var j=0;b.plugin.find("ul").removeClass("mobile").show();b.plugin.find("ul li").each(function(){j+=a(this).width()});return j}function h(j){if(j=="dropdown"){b.plugin.find("ul").addClass("mobile").hide();b.plugin.find(".pmDropDown").show()}else{b.plugin.find("ul").removeClass("mobile").show();b.plugin.find(".pmDropDown").hide()}b.plugin.find(".pmDropDown a").removeClass("active")}if(g()>i){h("dropdown")}else{h("normal")}};b.enableDropDown=function(){if(b.plugin.find(".pmDropDown a").hasClass("active")){b.disableDropDown();return false}b.plugin.find(".pmDropDown a").addClass("active");b.plugin.find("ul").show()};b.disableDropDown=function(){if(b.plugin.find(".pmDropDown a").hasClass("active")){b.plugin.find(".pmDropDown a").removeClass("active");b.plugin.find("ul").hide()}};f();return this}})(window.Zepto||window.jQuery);
